{"version":3,"sources":["utils/prettyBytes.js","utils/redableTime.js","utils/copyToClipboard.js","pages/File.js"],"names":["prettyBytes","num","exponent","neg","units","Math","min","floor","log","length","Number","pow","toFixed","redableTime","datetimeString","now","Date","getHours","getMinutes","getDate","getMonth","getFullYear","copyToClipboard","str","el","document","createElement","value","setAttribute","style","position","left","body","appendChild","select","execCommand","removeChild","File","match","useRouteMatch","fileId","params","useSwr","url","fetch","then","res","json","data","error","className","textAlign","color","id","name","modifiedTime","iconLink","mimeType","size","hasThumbnail","thumbnailLink","src","alt","href","onClick","window","location","origin"],"mappings":"2FAaeA,IAbf,SAAqBC,GACnB,IAAIC,EAEFC,EAAMF,EAAM,EACZG,EAAQ,CAAC,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAE1D,OADID,IAAKF,GAAOA,GACZA,EAAM,GAAWE,EAAM,IAAM,IAAMF,EAAM,MAC7CC,EAAWG,KAAKC,IAAID,KAAKE,MAAMF,KAAKG,IAAIP,GAAOI,KAAKG,IAAI,MAAQJ,EAAMK,OAAS,IAGvEN,EAAM,IAAM,KAFpBF,EAAMS,QAAQT,EAAMI,KAAKM,IAAI,IAAMT,IAAWU,QAAQ,KAEtB,IADzBR,EAAMF,M,gCCJAW,IALf,SAAqBC,GACnB,IAAMC,EAAM,IAAIC,KAAKF,GACrB,MAAM,GAAN,OAAUC,EAAIE,WAAd,YAA4BF,EAAIG,aAAhC,eAAmDH,EAAII,UAAvD,YAAoEJ,EAAIK,WAAxE,YAAsFL,EAAIM,iB,gCCU7EC,IAZf,SAAyBC,GACvB,IAAMC,EAAKC,SAASC,cAAc,YAClCF,EAAGG,MAAQJ,EACXC,EAAGI,aAAa,WAAY,IAC5BJ,EAAGK,MAAMC,SAAW,WACpBN,EAAGK,MAAME,KAAO,UAChBN,SAASO,KAAKC,YAAYT,GAC1BA,EAAGU,SACHT,SAASU,YAAY,QACrBV,SAASO,KAAKI,YAAYZ,K,gCCT5B,0GAOe,SAASa,IACtB,IAAMC,EAAQC,YAAc,iBACtBC,EAASF,EAAQA,EAAMG,OAAOD,OAAS,GAFhB,EAGLE,YAAO,aAAD,OAAcF,IAAU,SAACG,GAAD,OAASC,MAAMD,GAAKE,MAAK,SAACC,GAAD,OAASA,EAAIC,aAApFC,EAHqB,EAGrBA,KAAMC,EAHe,EAGfA,MAKd,IAAKD,IAASC,EAAO,OAAO,yBAAKC,UAAU,gBAC3C,GAAID,EAAO,OAAO,wBAAIpB,MAAO,CAAEsB,UAAW,SAAUC,MAAO,QAAzC,wBATW,IAWrBC,EAAkFL,EAAlFK,GAAIC,EAA8EN,EAA9EM,KAAMC,EAAwEP,EAAxEO,aAAcC,EAA0DR,EAA1DQ,SAAUC,EAAgDT,EAAhDS,SAAUC,EAAsCV,EAAtCU,KAAMC,EAAgCX,EAAhCW,aAAcC,EAAkBZ,EAAlBY,cAExE,OACE,yBAAKV,UAAU,aAAaG,GAAIA,GAC7BM,GAAgB,yBAAKT,UAAU,mBAAmBW,IAAKD,EAAeE,IAAKR,IAC5E,yBAAKJ,UAAU,+BACb,yBAAKA,UAAU,kBAAkBW,IAAKL,EAAUM,IAAKL,IACrD,wBAAIP,UAAU,oBAAoBI,IAEpC,qCAAWG,GACX,qCAAWzD,YAAY0D,IACvB,8CAAoB7C,YAAY0C,IAChC,yBAAKL,UAAU,mCACb,uBAAGa,KAAI,6BAAwBT,EAAxB,eAAmCD,GAAMH,UAAU,kBACxD,0BAAMA,UAAU,YACd,8BAAUI,KAAK,sBAEjB,0BAAMJ,UAAU,YAAhB,iBAEF,4BAAQc,QAzBa,kBAAM1C,YAAgB,GAAD,OAAI2C,OAAOC,SAASC,OAApB,8BAAgD3B,MA0BxF,0BAAMU,UAAU,YACd,8BAAUI,KAAK,kBAEjB,0BAAMJ,UAAU,YAAhB,yBAEF,4BAAQc,QA9BQ,kBAAM1C,YAAgB,GAAD,OAAI2C,OAAOC,SAASC,OAApB,iBAAmC3B,MA+BtE,0BAAMU,UAAU,YACd,8BAAUI,KAAK,kBAEjB,0BAAMJ,UAAU,YAAhB","file":"static/js/5.a85ee557.chunk.js","sourcesContent":["function prettyBytes(num) {\r\n  var exponent,\r\n    unit,\r\n    neg = num < 0,\r\n    units = [\"B\", \"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\r\n  if (neg) num = -num;\r\n  if (num < 1) return (neg ? \"-\" : \"\") + num + \" B\";\r\n  exponent = Math.min(Math.floor(Math.log(num) / Math.log(1000)), units.length - 1);\r\n  num = Number((num / Math.pow(1000, exponent)).toFixed(2));\r\n  unit = units[exponent];\r\n  return (neg ? \"-\" : \"\") + num + \" \" + unit;\r\n}\r\n\r\nexport default prettyBytes;\r\n","function redableTime(datetimeString) {\r\n  const now = new Date(datetimeString);\r\n  return `${now.getHours()}:${now.getMinutes()} on ${now.getDate()}/${now.getMonth()}/${now.getFullYear()}`;\r\n}\r\n\r\nexport default redableTime;\r\n","function copyToClipboard(str) {\r\n  const el = document.createElement(\"textarea\");\r\n  el.value = str;\r\n  el.setAttribute(\"readonly\", \"\");\r\n  el.style.position = \"absolute\";\r\n  el.style.left = \"-9999px\";\r\n  document.body.appendChild(el);\r\n  el.select();\r\n  document.execCommand(\"copy\");\r\n  document.body.removeChild(el);\r\n}\r\n\r\nexport default copyToClipboard;\r\n","import React from \"react\";\r\nimport { useRouteMatch } from \"react-router\";\r\nimport useSwr from \"swr\";\r\nimport copyToClipboard from \"../utils/copyToClipboard\";\r\nimport prettyBytes from \"../utils/prettyBytes\";\r\nimport redableTime from \"../utils/redableTime\";\r\n\r\nexport default function File() {\r\n  const match = useRouteMatch(\"/file/:fileId\");\r\n  const fileId = match ? match.params.fileId : \"\";\r\n  const { data, error } = useSwr(`/api/file/${fileId}`, (url) => fetch(url).then((res) => res.json()));\r\n\r\n  const copyStreamableLink = () => copyToClipboard(`${window.location.origin}/api/file/download/${fileId}`);\r\n  const copyShareLink = () => copyToClipboard(`${window.location.origin}/file/${fileId}`);\r\n\r\n  if (!data && !error) return <div className=\"loading-div\" />;\r\n  if (error) return <h4 style={{ textAlign: \"center\", color: \"red\" }}>Cannot find the file</h4>;\r\n\r\n  const { id, name, modifiedTime, iconLink, mimeType, size, hasThumbnail, thumbnailLink } = data;\r\n\r\n  return (\r\n    <div className=\"drive-file\" id={id}>\r\n      {hasThumbnail && <img className=\"drive-file-thumb\" src={thumbnailLink} alt={name} />}\r\n      <div className=\"row items-center mt-1 mb-05\">\r\n        <img className=\"drive-item-icon\" src={iconLink} alt={mimeType} />\r\n        <h2 className=\"drive-item-title\">{name}</h2>\r\n      </div>\r\n      <h4>Type: {mimeType}</h4>\r\n      <h4>Size: {prettyBytes(size)}</h4>\r\n      <h4>Last modified: {redableTime(modifiedTime)}</h4>\r\n      <div className=\"row flex-wrap space-evenly mt-1\">\r\n        <a href={`/api/file/download/${name}?id=${id}`} className=\"button primary\">\r\n          <span className=\"btn-icon\">\r\n            <ion-icon name=\"download-outline\" />\r\n          </span>\r\n          <span className=\"btn-text\">Download now</span>\r\n        </a>\r\n        <button onClick={copyStreamableLink}>\r\n          <span className=\"btn-icon\">\r\n            <ion-icon name=\"play-outline\" />\r\n          </span>\r\n          <span className=\"btn-text\">Copy streamable link</span>\r\n        </button>\r\n        <button onClick={copyShareLink}>\r\n          <span className=\"btn-icon\">\r\n            <ion-icon name=\"copy-outline\" />\r\n          </span>\r\n          <span className=\"btn-text\">Copy share link</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}