{"ast":null,"code":"import _regeneratorRuntime from\"/www/wwwroot/cdn3.imgblur.top/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/www/wwwroot/cdn3.imgblur.top/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/www/wwwroot/cdn3.imgblur.top/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";export default function Setup(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),clientId=_useState2[0],setClientId=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),clientSecret=_useState4[0],setClientSecret=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loadingAuthURL=_useState6[0],setLoadingAuthURL=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),authCode=_useState8[0],setAuthCode=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loadingToken=_useState10[0],setLoadingToken=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),token=_useState12[0],setToken=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),scope=_useState14[0],setScope=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),parentFolder=_useState16[0],setParentFolder=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),username=_useState18[0],setUsername=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),password=_useState20[0],setPassword=_useState20[1];var getAuthURL=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var params,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoadingAuthURL(true);params=new URLSearchParams({clientId:clientId,clientSecret:clientSecret});_context.next=4;return fetch(\"/api/getAuthURL?\".concat(params)).then(function(res){return res.json();});case 4:res=_context.sent;if(!res.error)window.open(res.authURL);setLoadingAuthURL(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getAuthURL(){return _ref.apply(this,arguments);};}();var getAuthToken=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var params,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoadingToken(true);params=new URLSearchParams({clientId:clientId,clientSecret:clientSecret,authCode:authCode});_context2.next=4;return fetch(\"/api/getAuthToken?\".concat(params)).then(function(res){return res.json();});case 4:res=_context2.sent;if(!res.error)setToken(JSON.stringify(res.token));setLoadingToken(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function getAuthToken(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h1\",{style:{marginBottom:12}},\"Setup\"),/*#__PURE__*/React.createElement(\"h3\",null,\"Drive\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"clientId\",value:clientId,placeholder:\"Client Id\",onChange:function onChange(e){return setClientId(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"clientSecret\",value:clientSecret,placeholder:\"Client Secret\",onChange:function onChange(e){return setClientSecret(e.target.value);}}),/*#__PURE__*/React.createElement(\"button\",{className:\"btn\",onClick:getAuthURL,disabled:loadingAuthURL},\"Get auth code\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"authCode\",value:authCode,placeholder:\"Paste the auth code here\",onChange:function onChange(e){return setAuthCode(e.target.value);}}),/*#__PURE__*/React.createElement(\"button\",{className:\"btn\",onClick:getAuthToken,disabled:!authCode||loadingToken},\"Generate token\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"token\",value:token,placeholder:\"Token value will show here\",readOnly:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"parentFolder\",value:parentFolder,placeholder:\"Parent folder id (OPTIONAL) eg. 0ABZHZpfYfdVCUk9PVA\",onChange:function onChange(e){return setParentFolder(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"scope\",value:scope,placeholder:\"Scope (OPTIONAL) [\\\"https://www.googleapis.com/auth/drive\\\"]\",onChange:function onChange(e){return setScope(e.target.value);}}),/*#__PURE__*/React.createElement(\"h3\",null,\"Auth\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"username\",value:username,placeholder:\"Username\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"password\",value:password,placeholder:\"Password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/React.createElement(\"h3\",null,\"Enviorment variables:\"),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Value\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"CLIENT_ID\"),/*#__PURE__*/React.createElement(\"td\",null,\"\".concat(clientId))),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"CLIENT_SECRET\"),/*#__PURE__*/React.createElement(\"td\",null,\"\".concat(clientSecret))),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"TOKEN\"),/*#__PURE__*/React.createElement(\"td\",null,\"\".concat(token))),parentFolder&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"PARENT_FOLDER\"),/*#__PURE__*/React.createElement(\"td\",null,\"\".concat(parentFolder))),scope&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"SCOPE\"),/*#__PURE__*/React.createElement(\"td\",null,\"\".concat(scope))),username&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"AUTH\"),/*#__PURE__*/React.createElement(\"td\",null,\"\".concat(username,\":\").concat(password))))));}","map":{"version":3,"sources":["/www/wwwroot/cdn3.imgblur.top/web/src/pages/Setup.js"],"names":["React","useState","Setup","clientId","setClientId","clientSecret","setClientSecret","loadingAuthURL","setLoadingAuthURL","authCode","setAuthCode","loadingToken","setLoadingToken","token","setToken","scope","setScope","parentFolder","setParentFolder","username","setUsername","password","setPassword","getAuthURL","params","URLSearchParams","fetch","then","res","json","error","window","open","authURL","getAuthToken","JSON","stringify","marginBottom","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nexport default function Setup() {\r\n  const [clientId, setClientId] = useState(\"\");\r\n  const [clientSecret, setClientSecret] = useState(\"\");\r\n  const [loadingAuthURL, setLoadingAuthURL] = useState(false);\r\n  const [authCode, setAuthCode] = useState(\"\");\r\n  const [loadingToken, setLoadingToken] = useState(false);\r\n  const [token, setToken] = useState(\"\");\r\n  const [scope, setScope] = useState(\"\");\r\n  const [parentFolder, setParentFolder] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const getAuthURL = async () => {\r\n    setLoadingAuthURL(true);\r\n    const params = new URLSearchParams({\r\n      clientId,\r\n      clientSecret\r\n    });\r\n    const res = await fetch(`/api/getAuthURL?${params}`).then((res) => res.json());\r\n    if (!res.error) window.open(res.authURL);\r\n    setLoadingAuthURL(false);\r\n  };\r\n\r\n  const getAuthToken = async () => {\r\n    setLoadingToken(true);\r\n    const params = new URLSearchParams({\r\n      clientId,\r\n      clientSecret,\r\n      authCode\r\n    });\r\n    const res = await fetch(`/api/getAuthToken?${params}`).then((res) => res.json());\r\n    if (!res.error) setToken(JSON.stringify(res.token));\r\n    setLoadingToken(false);\r\n  };\r\n\r\n  return (\r\n    <section>\r\n      <h1 style={{ marginBottom: 12 }}>Setup</h1>\r\n      <h3>Drive</h3>\r\n      <input type=\"text\" name=\"clientId\" value={clientId} placeholder=\"Client Id\" onChange={(e) => setClientId(e.target.value)} />\r\n      <input\r\n        type=\"text\"\r\n        name=\"clientSecret\"\r\n        value={clientSecret}\r\n        placeholder=\"Client Secret\"\r\n        onChange={(e) => setClientSecret(e.target.value)}\r\n      />\r\n      <button className=\"btn\" onClick={getAuthURL} disabled={loadingAuthURL}>\r\n        Get auth code\r\n      </button>\r\n      <input\r\n        type=\"text\"\r\n        name=\"authCode\"\r\n        value={authCode}\r\n        placeholder=\"Paste the auth code here\"\r\n        onChange={(e) => setAuthCode(e.target.value)}\r\n      />\r\n      <button className=\"btn\" onClick={getAuthToken} disabled={!authCode || loadingToken}>\r\n        Generate token\r\n      </button>\r\n      <input type=\"text\" name=\"token\" value={token} placeholder=\"Token value will show here\" readOnly />\r\n      <input\r\n        type=\"text\"\r\n        name=\"parentFolder\"\r\n        value={parentFolder}\r\n        placeholder={`Parent folder id (OPTIONAL) eg. 0ABZHZpfYfdVCUk9PVA`}\r\n        onChange={(e) => setParentFolder(e.target.value)}\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        name=\"scope\"\r\n        value={scope}\r\n        placeholder={`Scope (OPTIONAL) [\"https://www.googleapis.com/auth/drive\"]`}\r\n        onChange={(e) => setScope(e.target.value)}\r\n      />\r\n      <h3>Auth</h3>\r\n      <input type=\"text\" name=\"username\" value={username} placeholder=\"Username\" onChange={(e) => setUsername(e.target.value)} />\r\n      <input type=\"text\" name=\"password\" value={password} placeholder=\"Password\" onChange={(e) => setPassword(e.target.value)} />\r\n      <h3>Enviorment variables:</h3>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Value</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>CLIENT_ID</td>\r\n            <td>{`${clientId}`}</td>\r\n          </tr>\r\n          <tr>\r\n            <td>CLIENT_SECRET</td>\r\n            <td>{`${clientSecret}`}</td>\r\n          </tr>\r\n          <tr>\r\n            <td>TOKEN</td>\r\n            <td>{`${token}`}</td>\r\n          </tr>\r\n          {parentFolder && (\r\n            <tr>\r\n              <td>PARENT_FOLDER</td>\r\n              <td>{`${parentFolder}`}</td>\r\n            </tr>\r\n          )}\r\n          {scope && (\r\n            <tr>\r\n              <td>SCOPE</td>\r\n              <td>{`${scope}`}</td>\r\n            </tr>\r\n          )}\r\n          {username && (\r\n            <tr>\r\n              <td>AUTH</td>\r\n              <td>{`${username}:${password}`}</td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </section>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}