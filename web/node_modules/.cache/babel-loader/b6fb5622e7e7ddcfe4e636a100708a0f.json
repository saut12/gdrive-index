{"ast":null,"code":"import _regeneratorRuntime from\"/www/wwwroot/cdn3.imgblur.top/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/www/wwwroot/cdn3.imgblur.top/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/www/wwwroot/cdn3.imgblur.top/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Suspense,useState,useEffect}from\"react\";import{BrowserRouter as Router,Switch,Route}from\"react-router-dom\";import parseCookies from\"./utils/parseCookies\";import Navbar from\"./components/Navbar\";var Folder=React.lazy(function(){return import(\"./pages/Folder\");});var File=React.lazy(function(){return import(\"./pages/File\");});var Share=React.lazy(function(){return import(\"./pages/Share\");});var Setup=React.lazy(function(){return import(\"./pages/Setup\");});var Login=React.lazy(function(){return import(\"./pages/Login\");});export default function App(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loggedIn=_useState4[0],setLoggedIn=_useState4[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var cookies,host,req;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cookies=parseCookies(document.cookie);if(cookies.basicauth){_context.next=5;break;}setLoading(false);setLoggedIn(false);return _context.abrupt(\"return\");case 5:setLoading(true);host=window.location.host===\"localhost:3000\"?\"http://localhost:3001\":\"\";_context.next=9;return fetch(\"\".concat(host,\"/checkAuth?basicauth=\").concat(cookies.basicauth)).then(function(res){return res.json();});case 9:req=_context.sent;if(req[\"auth\"]){setLoggedIn(true);}else{document.cookie=\"basicauth=\";setLoggedIn(false);}setLoading(false);case 12:case\"end\":return _context.stop();}}},_callee);}))();},[]);if(loading){return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Navbar,null),/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"loading-div\"})));}return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Navbar,null),/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",{className:\"loading-div\"})},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/setup\",component:Setup}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/share/:folderId\",component:Share}),!loggedIn&&/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:Login}),loggedIn&&/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:Folder}),loggedIn&&/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/:folderId\",component:Folder}),loggedIn&&/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/file/:fileId\",component:File}),/*#__PURE__*/React.createElement(Route,null,/*#__PURE__*/React.createElement(\"h2\",{style:{textAlign:\"center\"}},\"404 - Are you lost babygirl?\"))))));}","map":{"version":3,"sources":["/www/wwwroot/cdn3.imgblur.top/web/src/App.js"],"names":["React","Suspense","useState","useEffect","BrowserRouter","Router","Switch","Route","parseCookies","Navbar","Folder","lazy","File","Share","Setup","Login","App","loading","setLoading","loggedIn","setLoggedIn","cookies","document","cookie","basicauth","host","window","location","fetch","then","res","json","req","textAlign"],"mappings":"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","sourcesContent":["import React, { Suspense, useState, useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport parseCookies from \"./utils/parseCookies\";\r\nimport Navbar from \"./components/Navbar\";\r\n\r\nconst Folder = React.lazy(() => import(\"./pages/Folder\"));\r\nconst File = React.lazy(() => import(\"./pages/File\"));\r\nconst Share = React.lazy(() => import(\"./pages/Share\"));\r\nconst Setup = React.lazy(() => import(\"./pages/Setup\"));\r\nconst Login = React.lazy(() => import(\"./pages/Login\"));\r\n\r\nexport default function App() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const cookies = parseCookies(document.cookie);\r\n      if (!cookies.basicauth) {\r\n        setLoading(false);\r\n        setLoggedIn(false);\r\n        return;\r\n      }\r\n      setLoading(true);\r\n      const host = window.location.host === \"localhost:3000\" ? \"http://localhost:3001\" : \"\";\r\n      const req = await fetch(`${host}/checkAuth?basicauth=${cookies.basicauth}`).then((res) => res.json());\r\n      if (req[\"auth\"]) {\r\n        setLoggedIn(true);\r\n      } else {\r\n        document.cookie = `basicauth=`;\r\n        setLoggedIn(false);\r\n      }\r\n      setLoading(false);\r\n    })();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Router>\r\n        <Navbar />\r\n        <main>\r\n          <div className=\"loading-div\" />\r\n        </main>\r\n      </Router>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Router>\r\n      <Navbar />\r\n      <main>\r\n        <Suspense fallback={<div className=\"loading-div\" />}>\r\n          <Switch>\r\n            <Route exact path=\"/setup\" component={Setup} />\r\n            <Route exact path=\"/share/:folderId\" component={Share} />\r\n            {!loggedIn && <Route exact path=\"/\" component={Login} />}\r\n            {loggedIn && <Route exact path=\"/\" component={Folder} />}\r\n            {loggedIn && <Route exact path=\"/:folderId\" component={Folder} />}\r\n            {loggedIn && <Route exact path=\"/file/:fileId\" component={File} />}\r\n            <Route>\r\n              <h2 style={{ textAlign: \"center\" }}>404 - Are you lost babygirl?</h2>\r\n            </Route>\r\n          </Switch>\r\n        </Suspense>\r\n      </main>\r\n    </Router>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}