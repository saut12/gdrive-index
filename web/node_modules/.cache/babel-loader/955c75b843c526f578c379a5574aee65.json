{"ast":null,"code":"import React from\"react\";import{useRouteMatch}from\"react-router\";import useSwr from\"swr\";import copyToClipboard from\"../utils/copyToClipboard\";import prettyBytes from\"../utils/prettyBytes\";import redableTime from\"../utils/redableTime\";export default function File(){var match=useRouteMatch(\"/file/:fileId\");var fileId=match?match.params.fileId:\"\";var _useSwr=useSwr(\"/api/file/\".concat(fileId),function(url){return fetch(url).then(function(res){return res.json();});}),data=_useSwr.data,error=_useSwr.error;var copyStreamableLink=function copyStreamableLink(){return copyToClipboard(\"\".concat(window.location.origin,\"/api/file/download/\").concat(fileId));};var copyShareLink=function copyShareLink(){return copyToClipboard(\"\".concat(window.location.origin,\"/file/\").concat(fileId));};if(!data&&!error)return/*#__PURE__*/React.createElement(\"div\",{className:\"loading-div\"});if(error)return/*#__PURE__*/React.createElement(\"h4\",{style:{textAlign:\"center\",color:\"red\"}},\"Cannot find the file\");var id=data.id,name=data.name,modifiedTime=data.modifiedTime,iconLink=data.iconLink,mimeType=data.mimeType,size=data.size,hasThumbnail=data.hasThumbnail,thumbnailLink=data.thumbnailLink;return/*#__PURE__*/React.createElement(\"div\",{className:\"drive-file\",id:id},hasThumbnail&&/*#__PURE__*/React.createElement(\"img\",{className:\"drive-file-thumb\",src:thumbnailLink,alt:name}),/*#__PURE__*/React.createElement(\"div\",{className:\"row items-center mt-1 mb-05\"},/*#__PURE__*/React.createElement(\"img\",{className:\"drive-item-icon\",src:iconLink,alt:mimeType}),/*#__PURE__*/React.createElement(\"h2\",{className:\"drive-item-title\"},name)),/*#__PURE__*/React.createElement(\"h4\",null,\"Type: \",mimeType),/*#__PURE__*/React.createElement(\"h4\",null,\"Size: \",prettyBytes(size)),/*#__PURE__*/React.createElement(\"h4\",null,\"Last modified: \",redableTime(modifiedTime)),/*#__PURE__*/React.createElement(\"div\",{className:\"row flex-wrap space-evenly mt-1\"},/*#__PURE__*/React.createElement(\"a\",{href:\"/api/file/download/\".concat(name,\"?id=\").concat(id),className:\"button primary\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn-icon\"},/*#__PURE__*/React.createElement(\"ion-icon\",{name:\"download-outline\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"btn-text\"},\"Download now\")),/*#__PURE__*/React.createElement(\"button\",{onClick:copyStreamableLink},/*#__PURE__*/React.createElement(\"span\",{className:\"btn-icon\"},/*#__PURE__*/React.createElement(\"ion-icon\",{name:\"play-outline\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"btn-text\"},\"Copy streamable link\")),/*#__PURE__*/React.createElement(\"button\",{onClick:copyShareLink},/*#__PURE__*/React.createElement(\"span\",{className:\"btn-icon\"},/*#__PURE__*/React.createElement(\"ion-icon\",{name:\"copy-outline\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"btn-text\"},\"Copy share link\"))));}","map":{"version":3,"sources":["/www/wwwroot/cdn3.imgblur.top/web/src/pages/File.js"],"names":["React","useRouteMatch","useSwr","copyToClipboard","prettyBytes","redableTime","File","match","fileId","params","url","fetch","then","res","json","data","error","copyStreamableLink","window","location","origin","copyShareLink","textAlign","color","id","name","modifiedTime","iconLink","mimeType","size","hasThumbnail","thumbnailLink"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useRouteMatch } from \"react-router\";\r\nimport useSwr from \"swr\";\r\nimport copyToClipboard from \"../utils/copyToClipboard\";\r\nimport prettyBytes from \"../utils/prettyBytes\";\r\nimport redableTime from \"../utils/redableTime\";\r\n\r\nexport default function File() {\r\n  const match = useRouteMatch(\"/file/:fileId\");\r\n  const fileId = match ? match.params.fileId : \"\";\r\n  const { data, error } = useSwr(`/api/file/${fileId}`, (url) => fetch(url).then((res) => res.json()));\r\n\r\n  const copyStreamableLink = () => copyToClipboard(`${window.location.origin}/api/file/download/${fileId}`);\r\n  const copyShareLink = () => copyToClipboard(`${window.location.origin}/file/${fileId}`);\r\n\r\n  if (!data && !error) return <div className=\"loading-div\" />;\r\n  if (error) return <h4 style={{ textAlign: \"center\", color: \"red\" }}>Cannot find the file</h4>;\r\n\r\n  const { id, name, modifiedTime, iconLink, mimeType, size, hasThumbnail, thumbnailLink } = data;\r\n\r\n  return (\r\n    <div className=\"drive-file\" id={id}>\r\n      {hasThumbnail && <img className=\"drive-file-thumb\" src={thumbnailLink} alt={name} />}\r\n      <div className=\"row items-center mt-1 mb-05\">\r\n        <img className=\"drive-item-icon\" src={iconLink} alt={mimeType} />\r\n        <h2 className=\"drive-item-title\">{name}</h2>\r\n      </div>\r\n      <h4>Type: {mimeType}</h4>\r\n      <h4>Size: {prettyBytes(size)}</h4>\r\n      <h4>Last modified: {redableTime(modifiedTime)}</h4>\r\n      <div className=\"row flex-wrap space-evenly mt-1\">\r\n        <a href={`/api/file/download/${name}?id=${id}`} className=\"button primary\">\r\n          <span className=\"btn-icon\">\r\n            <ion-icon name=\"download-outline\" />\r\n          </span>\r\n          <span className=\"btn-text\">Download now</span>\r\n        </a>\r\n        <button onClick={copyStreamableLink}>\r\n          <span className=\"btn-icon\">\r\n            <ion-icon name=\"play-outline\" />\r\n          </span>\r\n          <span className=\"btn-text\">Copy streamable link</span>\r\n        </button>\r\n        <button onClick={copyShareLink}>\r\n          <span className=\"btn-icon\">\r\n            <ion-icon name=\"copy-outline\" />\r\n          </span>\r\n          <span className=\"btn-text\">Copy share link</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}