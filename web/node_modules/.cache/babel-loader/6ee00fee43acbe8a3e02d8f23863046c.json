{"ast":null,"code":"import _slicedToArray from\"/www/wwwroot/cdn3.imgblur.top/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useMemo}from\"react\";import{useRouteMatch}from\"react-router\";import useSwr from\"swr\";import DriveItem from\"../components/DriveItem\";function Folder(_ref){var search=_ref.search,share=_ref.share;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var match=useRouteMatch(share?\"/share/:folderId\":\"/:folderId\");var folderId=match?match.params.folderId:\"\";var _useSwr=useSwr(\"/api/folder/\".concat(folderId),function(url){return fetch(url).then(function(res){return res.json();});}),data=_useSwr.data,error=_useSwr.error;var searched=useMemo(function(){if(query.length<3)return[];return data.files.filter(function(val){return val.name.toLowerCase().indexOf(query.toLowerCase())!==-1;});},[query,data]);if(!data&&!error)return/*#__PURE__*/React.createElement(React.Fragment,null,search&&/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"query\",value:query,placeholder:\"Search in this folder...\",onChange:function onChange(e){return setQuery(e.target.value);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"loading-div\"}));if(error)return/*#__PURE__*/React.createElement(\"h4\",{style:{textAlign:\"center\",color:\"red\"}},\"Cannot find the folder\");return/*#__PURE__*/React.createElement(React.Fragment,null,search&&/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"query\",value:query,placeholder:\"Search in this folder...\",onChange:function onChange(e){return setQuery(e.target.value);}}),query.length>=3?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h4\",{className:\"drive-results-title\"},\"Search results:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"drive-items\"},searched.map(function(item){return/*#__PURE__*/React.createElement(DriveItem,Object.assign({key:item.id},item));}))):/*#__PURE__*/React.createElement(\"div\",{className:\"drive-items\"},data.files.map(function(item){return/*#__PURE__*/React.createElement(DriveItem,Object.assign({key:item.id},item));})));}Folder.defaultProps={search:true,share:false};export default Folder;","map":{"version":3,"sources":["/www/wwwroot/cdn3.imgblur.top/web/src/pages/Folder.js"],"names":["React","useState","useMemo","useRouteMatch","useSwr","DriveItem","Folder","search","share","query","setQuery","match","folderId","params","url","fetch","then","res","json","data","error","searched","length","files","filter","val","name","toLowerCase","indexOf","e","target","value","textAlign","color","map","item","id","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useMemo } from \"react\";\r\nimport { useRouteMatch } from \"react-router\";\r\nimport useSwr from \"swr\";\r\nimport DriveItem from \"../components/DriveItem\";\r\n\r\nfunction Folder({ search, share }) {\r\n  const [query, setQuery] = useState(\"\");\r\n  const match = useRouteMatch(share ? \"/share/:folderId\" : \"/:folderId\");\r\n  const folderId = match ? match.params.folderId : \"\";\r\n  const { data, error } = useSwr(`/api/folder/${folderId}`, (url) => fetch(url).then((res) => res.json()));\r\n\r\n  const searched = useMemo(() => {\r\n    if (query.length < 3) return [];\r\n    return data.files.filter((val) => val.name.toLowerCase().indexOf(query.toLowerCase()) !== -1);\r\n  }, [query, data]);\r\n\r\n  if (!data && !error)\r\n    return (\r\n      <>\r\n        {search && (\r\n          <input type=\"text\" name=\"query\" value={query} placeholder=\"Search in this folder...\" onChange={(e) => setQuery(e.target.value)} />\r\n        )}\r\n        <div className=\"loading-div\" />\r\n      </>\r\n    );\r\n  if (error) return <h4 style={{ textAlign: \"center\", color: \"red\" }}>Cannot find the folder</h4>;\r\n\r\n  return (\r\n    <>\r\n      {search && (\r\n        <input type=\"text\" name=\"query\" value={query} placeholder=\"Search in this folder...\" onChange={(e) => setQuery(e.target.value)} />\r\n      )}\r\n      {query.length >= 3 ? (\r\n        <>\r\n          <h4 className=\"drive-results-title\">Search results:</h4>\r\n          <div className=\"drive-items\">\r\n            {searched.map((item) => (\r\n              <DriveItem key={item.id} {...item} />\r\n            ))}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"drive-items\">\r\n          {data.files.map((item) => (\r\n            <DriveItem key={item.id} {...item} />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nFolder.defaultProps = { search: true, share: false };\r\n\r\nexport default Folder;\r\n"]},"metadata":{},"sourceType":"module"}